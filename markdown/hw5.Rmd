---
title: "Mapping Homicide Trends in Boston, MA"
subtitle: "Homework 5 (option 1) | ERHS 535"
author: "Caroline Wendt"
date: "11/22/2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.path = "figs/", echo = TRUE,
                      warning = FALSE, error = FALSE, message = FALSE)
```

```{r}
# packages
library(readr)
library(dplyr)
library(forcats)
library(tigris)
library(sf)
```

```{r}
# get data
homicides <- read_csv("../data/data-homicides-master/homicide-data.csv") %>%
  # create new column called city_name to unite city and state
  tidyr::unite("city_name", c(city, state), sep = ", ")
```

```{r}
# filter to Boston, Massachusetts homicides
ma_homicides <- homicides %>% 
  dplyr::filter(city_name == "Boston, MA") %>% 
  # create column for unsolved homicides
  mutate(unsolved_hom = 
           disposition %in% c("Closed without arrest","Open/No arrest"),
  # create column for top 3 victim race (lumps other races into "Other")
         victim_race_lump = fct_lump(victim_race, n = 3),
  # create new column with unsolved/solved status
         solved_status = if_else(unsolved_hom == TRUE,
                                 "Unsolved", "Solved"))
```

```{r}
# download boundaries for sub-city geography (tracts) from tigris
# show as a layer underneath the points showing homicides
boston_tracts <- tracts(state = 25,
                        county = 025,
                        cb = TRUE,
                        class = "sf")
class(boston_tracts)
```


